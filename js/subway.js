 //Broad Street Line

var fern = {
    line: "bs",
    order: -14,
    id: "fern",
    name: "Fern Rock",
    sched_wk_sb: [5.00, 5.15, 5.30, 5.45, 5.56, 6.06, 6.16, 6.24, 6.32, 6.39, 6.46, 6.53, 7.00, 7.07, 7.14, 7.21, 7.28, 7.35, 7.42, 7.49, 7.56, 8.03, 8.10, 8.17, 8.24, 8.31, 8.38, 8.45, 8.52, 9.00, 9.08, 9.16, 9.24, 9.32, 9.40, 9.48, 9.56, 10.04, 10.12, 10.20, 10.28, 10.36, 10.44, 10.52, 11.00, 11.08, 11.16, 11.24, 11.32, 11.40, 11.48, 11.56, 12.04, 12.12, 12.20, 12.28, 12.36, 12.44, 12.52, 13.00, 13.08, 13.16, 13.24, 13.32, 13.40, 13.48, 13.56, 14.04, 14.12, 14.20, 14.28, 14.36, 14.44, 14.52, 15.00, 15.08, 15.16, 15.24, 15.32, 15.40, 15.48, 15.56, 16.03, 16.10, 16.17, 16.24, 16.31, 16.38, 16.45, 16.52, 16.59, 17.06, 17.13, 17.20, 17.27, 17.34, 17.41, 17.48, 17.55, 18.02, 18.10, 18.20, 18.30, 18.40, 18.50, 19.00, 19.10, 19.20, 19.30, 19.40, 19.50, 20.00, 20.12, 20.24, 20.36, 20.48, 21.00, 21.12, 21.24, 21.36, 21.48, 22.00, 22.12, 22.24, 22.36, 22.48, 23.00, 23.12, 23.24, 23.36, 23.49, 24.03],
    sched_sat_sb: [5.00, 5.15, 5.30, 5.46, 6.00, 6.13, 6.26, 6.38, 6.50, 7.00, 7.14, 7.23, 7.36, 7.50, 8.00, 8.10, 8.20, 8.30, 8.40, 8.50, 9.00, 9.10, 9.20, 9.30, 9.40, 9.50, 10.00, 10.10, 10.20, 10.30, 10.40, 10.50, 11.00, 11.10, 11.20, 11.30, 11.40, 11.50, 12.00, 12.10, 12.20, 12.30, 12.40, 12.50, 13.00, 13.10, 13.20, 13.30, 13.40, 13.50, 14.00, 14.10, 14.20, 14.30, 14.40, 14.50, 15.00, 15.10, 15.20, 15.30, 15.40, 15.50, 16.00, 16.10, 16.20, 16.30, 16.40, 16.50, 17.00, 17.10, 17.20, 17.30, 17.40, 17.50, 18.00, 18.10, 18.20, 18.30, 18.40, 18.50, 19.00, 19.10, 19.20, 19.30, 19.40, 19.50, 20.00, 20.12, 20.24, 20.36, 20.48, 21.00, 21.12, 21.24, 21.36, 21.48, 22.00, 22.12, 22.24, 22.36, 22.48, 23.00, 23.12, 23.24, 23.36, 23.49, 24.03],
    sched_sun_sb: [5.00, 5.20, 5.40, 6.00, 6.15, 6.30, 6.45, 7.00, 7.13, 7.25, 7.37, 7.49, 8.01, 8.13, 8.25, 8.37, 8.49, 9.01, 9.13, 9.23, 9.33, 9.43, 9.53, 10.03, 10.13, 10.23, 10.33, 10.43, 10.53, 11.03, 11.13, 11.23, 11.33, 11.43, 11.53, 12.03, 12.13, 12.23, 12.33, 12.43, 12.53, 13.03, 13.13, 13.23, 13.33, 13.43, 13.53, 14.03, 14.13, 14.23, 14.33, 14.43, 14.53, 15.03, 15.13, 15.23, 15.33, 15.43, 15.53, 16.03, 16.13, 16.23, 16.33, 16.43, 16.53, 17.03, 17.13, 17.23, 17.33, 17.43, 17.53, 18.03, 18.13, 18.23, 18.33, 18.43, 18.53, 19.03, 19.14, 19.25, 19.36, 19.48, 20.00, 20.12, 20.24, 20.36, 20.48, 21.00, 21.12, 21.24, 21.36, 21.48, 22.00, 22.12, 22.24, 22.36, 22.48, 23.00, 23.12, 23.24, 23.36, 23.49, 24.03],
    sched_wk_nb: [5.26, 5.42, 5.59, 6.16, 6.31, 6.47, 7.02, 7.15, 7.22, 7.31, 7.40, 7.49, 7.56, 8.03, 8.10, 8.17, 8.24, 8.31, 8.38, 8.45, 8.52, 8.59, 9.06, 9.13, 9.20, 9.27, 9.35, 9.44, 9.52, 10.01, 10.09, 10.17, 10.25, 10.33, 10.41, 10.49, 10.57, 11.05, 11.13, 11.21, 11.29, 11.37, 11.45, 11.53, 12.01, 12.09, 12.17, 12.25, 12.33, 12.41, 12.49, 12.57, 13.05, 13.13, 13.21, 13.29, 13.37, 13.45, 13.53, 14.01, 14.09, 14.17, 14.25, 14.33, 14.41, 14.49, 14.57, 15.04, 15.13, 15.21, 15.29, 15.37, 15.45, 15.51, 15.59, 16.07, 16.16, 16.23, 16.31, 16.39, 16.46, 16.53, 17.00, 17.07, 17.14, 17.21, 17.28, 17.35, 17.42, 17.49, 17.56, 18.03, 18.10, 18.17, 18.24, 18.31, 18.38, 18.46, 18.55, 19.05, 19.15, 19.25, 19.35, 19.45, 19.55, 20.05, 20.15, 20.25, 20.35, 20.45, 20.55, 21.06, 21.17, 21.29, 21.41, 21.53, 22.05, 22.17, 22.29, 22.41, 22.53, 23.05, 23.17, 23.29, 23.41, 23.53, 24.05, 24.14],
    sched_sat_nb: [5.42, 5.59, 6.16, 6.31, 6.46, 7.02, 7.16, 7.29, 7.43, 7.54, 8.06, 8.16, 8.30, 8.46, 8.56, 9.06, 9.16, 9.26, 9.36, 9.46, 9.56, 10.06, 10.16, 10.26, 10.36, 10.46, 10.56, 11.06, 11.16, 11.26, 11.36, 11.46, 11.56, 12.06, 12.16, 12.26, 12.36, 12.46, 12.56, 13.06, 13.16, 13.26, 13.36, 13.46, 13.56, 14.06, 14.16, 14.26, 14.36, 14.46, 14.56, 15.06, 15.16, 15.26, 15.36, 15.46, 15.56, 16.06, 16.16, 16.26, 16.36, 16.46, 16.56, 17.06, 17.16, 17.26, 17.36, 17.46, 17.56, 18.06, 18.16, 18.26, 18.36, 18.46, 18.56, 19.06, 19.16, 19.26, 19.36, 19.46, 19.56, 20.06, 20.16, 20.26, 20.36, 20.46, 20.56, 21.06, 21.16, 21.28, 21.40, 21.52, 22.04, 22.16, 22.28, 22.40, 22.52, 23.04, 23.16, 23.28, 23.40, 23.52, 24.04, 24.16, 24.28, 24.40, 24.55],
    sched_sun_nb: [5.26, 5.42, 5.59, 6.16, 6.36, 6.56, 7.16, 7.31, 7.46, 8.01, 8.16, 8.29, 8.41, 8.53, 9.05, 9.17, 9.29, 9.41, 9.53, 10.05, 10.17, 10.28, 10.38, 10.48, 10.58, 11.08, 11.18, 11.28, 11.38, 11.48, 11.58, 12.08, 12.18, 12.28, 12.38, 12.48, 12.58, 13.08, 13.18, 13.28, 13.38, 13.48, 13.58, 14.08, 14.18, 14.28, 14.38, 14.48, 14.58, 15.08, 15.18, 15.28, 15.38, 15.48, 15.58, 16.08, 16.18, 16.28, 16.38, 16.48, 16.58, 17.08, 17.18, 17.28, 17.38, 17.48, 17.58, 18.08, 18.18, 18.28, 18.38, 18.48, 18.58, 19.08, 19.18, 19.28, 19.38, 19.48, 19.58, 20.08, 20.18, 20.28, 20.40, 20.52, 21.04, 21.16, 21.28, 21.40, 21.52, 22.04, 22.16, 22.28, 22.40, 22.52, 23.04, 23.16, 23.28, 23.40, 23.52, 24.04, 24.16, 24.28, 24.40, 24.55],
};
var olney = {
    line: "bs",
    order: -13,
    id: "olney",
    name: "Olney",
    sched_wk_sb: schedule(fern.sched_wk_sb, 3),
    sched_sat_sb: schedule(fern.sched_sat_sb, 3),
    sched_sun_sb: schedule(fern.sched_sun_sb, 3),
    sched_wk_nb: schedule(fern.sched_wk_nb, -3),
    sched_sat_nb: schedule(fern.sched_sat_nb, -3),
    sched_sun_nb: schedule(fern.sched_sun_nb, -3),
};
var logan = {
    line: "bs",
    order: -12,
    id: "logan",
    name: "Logan",
    sched_wk_sb: schedule(olney.sched_wk_sb, 2),
    sched_sat_sb: schedule(olney.sched_sat_sb, 2),
    sched_sun_sb: schedule(olney.sched_sun_sb, 2),
    sched_wk_nb: schedule(olney.sched_wk_nb, -2),
    sched_sat_nb: schedule(olney.sched_sat_nb, -2),
    sched_sun_nb: schedule(olney.sched_sun_nb, -2),
};
var wyoming = {
    line: "bs",
    order: -11,
    id: "wyoming",
    name: "Wyoming",
    sched_wk_sb: schedule(logan.sched_wk_sb, 2),
    sched_sat_sb: schedule(logan.sched_sat_sb, 2),
    sched_sun_sb: schedule(logan.sched_sun_sb, 2),
    sched_wk_nb: schedule(logan.sched_wk_nb, -2),
    sched_sat_nb: schedule(logan.sched_sat_nb, -2),
    sched_sun_nb: schedule(logan.sched_sun_nb, -2),
};
var hunt_park = {
    line: "bs",
    order: -10,
    id: "hunt_park",
    name: "Hunting Park",
    sched_wk_sb: schedule(wyoming.sched_wk_sb, 2),
    sched_sat_sb: schedule(wyoming.sched_sat_sb, 2),
    sched_sun_sb: schedule(wyoming.sched_sun_sb, 2),
    sched_wk_nb: schedule(wyoming.sched_wk_nb, -1),
    sched_sat_nb: schedule(wyoming.sched_sat_nb, -1),
    sched_sun_nb: schedule(wyoming.sched_sun_nb, -1),
};
var erie = {
    line: "bs",
    order: -9,
    id: "erie",
    name: "Erie",
    sched_wk_sb: schedule(hunt_park.sched_wk_sb, 2),
    sched_sat_sb: schedule(hunt_park.sched_sat_sb, 2),
    sched_sun_sb: schedule(hunt_park.sched_sun_sb, 2),
    sched_wk_nb: schedule(hunt_park.sched_wk_nb, -2),
    sched_sat_nb: schedule(hunt_park.sched_sat_nb, -2),
    sched_sun_nb: schedule(hunt_park.sched_sun_nb, -2),
};
var allegh = {
    line: "bs",
    order: -8,
    id: "allegh",
    name: "Allegheny",
    sched_wk_sb: schedule(erie.sched_wk_sb, 1),
    sched_sat_sb: schedule(erie.sched_sat_sb, 1),
    sched_sun_sb: schedule(erie.sched_sun_sb, 1),
    sched_wk_nb: schedule(erie.sched_wk_nb, -2),
    sched_sat_nb: schedule(erie.sched_sat_nb, -2),
    sched_sun_nb: schedule(erie.sched_sun_nb, -2),
};
var nphilly = {
    line: "bs",
    order: -7,
    id: "nphilly",
    name: "North Philly",
    sched_wk_sb: schedule(allegh.sched_wk_sb, 2),
    sched_sat_sb: schedule(allegh.sched_sat_sb, 2),
    sched_sun_sb: schedule(allegh.sched_sun_sb, 2),
    sched_wk_nb: schedule(allegh.sched_wk_nb, -1),
    sched_sat_nb: schedule(allegh.sched_sat_nb, -1),
    sched_sun_nb: schedule(allegh.sched_sun_nb, -1),
};
var susque = {
    line: "bs",
    order: -6,
    id: "susque",
    name: "Susquehanna-Dauphin",
    sched_wk_sb: schedule(nphilly.sched_wk_sb, 2),
    sched_sat_sb: schedule(nphilly.sched_sat_sb, 2),
    sched_sun_sb: schedule(nphilly.sched_sun_sb, 2),
    sched_wk_nb: schedule(nphilly.sched_wk_nb, -1),
    sched_sat_nb: schedule(nphilly.sched_sat_nb, -1),
    sched_sun_nb: schedule(nphilly.sched_sun_nb, -1),
};
var cecil = {
    line: "bs",
    order: -5,
    id: "cecil",
    name: "Cecil B Moore",
    sched_wk_sb: schedule(susque.sched_wk_sb, 1),
    sched_sat_sb: schedule(susque.sched_sat_sb, 1),
    sched_sun_sb: schedule(susque.sched_sun_sb, 1),
    sched_wk_nb: schedule(susque.sched_wk_nb, -2),
    sched_sat_nb: schedule(susque.sched_sat_nb, -2),
    sched_sun_nb: schedule(susque.sched_sun_nb, -2),
};
var girard = {
    line: "bs",
    order: -4,
    id: "girard",
    name: "Girard",
    sched_wk_sb: schedule(cecil.sched_wk_sb, 1),
    sched_sat_sb: schedule(cecil.sched_sat_sb, 1),
    sched_sun_sb: schedule(cecil.sched_sun_sb, 1),
    sched_wk_nb: schedule(cecil.sched_wk_nb, -2),
    sched_sat_nb: schedule(cecil.sched_sat_nb, -2),
    sched_sun_nb: schedule(cecil.sched_sun_nb, -2),
};
var fairmount = {
    line: "bs",
    order: -3,
    id: "fairmount",
    name: "Fairmount",
    sched_wk_sb: schedule(girard.sched_wk_sb, 2),
    sched_sat_sb: schedule(girard.sched_sat_sb, 2),
    sched_sun_sb: schedule(girard.sched_sun_sb, 2),
    sched_wk_nb: schedule(girard.sched_wk_nb, -2),
    sched_sat_nb: schedule(girard.sched_sat_nb, -2),
    sched_sun_nb: schedule(girard.sched_sun_nb, -2),
    close_wk: 22.3,
    close_end: 20.3,
};
var spring = {
    line: "bs",
    order: -2,
    id: "spring",
    name: "Spring Garden",
    sched_wk_sb: schedule(fairmount.sched_wk_sb, 2),
    sched_sat_sb: schedule(fairmount.sched_sat_sb, 2),
    sched_sun_sb: schedule(fairmount.sched_sun_sb, 2),
    sched_wk_nb: schedule(fairmount.sched_wk_nb, -1),
    sched_sat_nb: schedule(fairmount.sched_sat_nb, -1),
    sched_sun_nb: schedule(fairmount.sched_sun_nb, -1),
};
var race = {
    line: "bs",
    order: -1,
    id: "race",
    name: "Race-Vine",
    sched_wk_sb: schedule(spring.sched_wk_sb, 1),
    sched_sat_sb: schedule(spring.sched_sat_sb, 1),
    sched_sun_sb: schedule(spring.sched_sun_sb, 1),
    sched_wk_nb: schedule(spring.sched_wk_nb, -1),
    sched_sat_nb: schedule(spring.sched_sat_nb, -1),
    sched_sun_nb: schedule(spring.sched_sun_nb, -1),
};
var city_hall = {
    line: "bs",
    order: 0,
    id: "city_hall",
    name: "City Hall",
    sched_wk_sb: schedule(race.sched_wk_sb, 2),
    sched_sat_sb: schedule(race.sched_sat_sb, 2),
    sched_sun_sb: schedule(race.sched_sun_sb, 2),
    sched_wk_nb: schedule(race.sched_wk_nb, -2),
    sched_sat_nb: schedule(race.sched_sat_nb, -2),
    sched_sun_nb: schedule(race.sched_sun_nb, -2),
};
var walnut = {
    line: "bs",
    order: 1,
    id: "walnut",
    name: "Walnut-Locust",
    sched_wk_sb: schedule(city_hall.sched_wk_sb, 1),
    sched_sat_sb: schedule(city_hall.sched_sat_sb, 1),
    sched_sun_sb: schedule(city_hall.sched_sun_sb, 1),
    sched_wk_nb: schedule(city_hall.sched_wk_nb, -2),
    sched_sat_nb: schedule(city_hall.sched_sat_nb, -2),
    sched_sun_nb: schedule(city_hall.sched_sun_nb, -2),
};
var lombard = {
    line: "bs",
    order: 2,
    id: "lombard",
    name: "Lombard-South",
    sched_wk_sb: schedule(walnut.sched_wk_sb, 1),
    sched_sat_sb: schedule(walnut.sched_sat_sb, 1),
    sched_sun_sb: schedule(walnut.sched_sun_sb, 1),
    sched_wk_nb: schedule(walnut.sched_wk_nb, -1),
    sched_sat_nb: schedule(walnut.sched_sat_nb, -1),
    sched_sun_nb: schedule(walnut.sched_sun_nb, -1),
};
var ellsworth = {
    line: "bs",
    order: 3,
    id: "ellsworth",
    name: "Ellsworth-Federal",
    sched_wk_sb: schedule(lombard.sched_wk_sb, 1),
    sched_sat_sb: schedule(lombard.sched_sat_sb, 1),
    sched_sun_sb: schedule(lombard.sched_sun_sb, 1),
    sched_wk_nb: schedule(lombard.sched_wk_nb, -1),
    sched_sat_nb: schedule(lombard.sched_sat_nb, -1),
    sched_sun_nb: schedule(lombard.sched_sun_nb, -1),
};
var tasker = {
    line: "bs",
    order: 4,
    id: "tasker",
    name: "Tasker-Morris",
    sched_wk_sb: schedule(ellsworth.sched_wk_sb, 2),
    sched_sat_sb: schedule(ellsworth.sched_sat_sb, 2),
    sched_sun_sb: schedule(ellsworth.sched_sun_sb, 2),
    sched_wk_nb: schedule(ellsworth.sched_wk_nb, -1),
    sched_sat_nb: schedule(ellsworth.sched_sat_nb, -1),
    sched_sun_nb: schedule(ellsworth.sched_sun_nb, -1),
};
var snyder = {
    line: "bs",
    order: 5,
    id: "snyder",
    name: "Snyder",
    sched_wk_sb: schedule(tasker.sched_wk_sb, 2),
    sched_sat_sb: schedule(tasker.sched_sat_sb, 2),
    sched_sun_sb: schedule(tasker.sched_sun_sb, 2),
    sched_wk_nb: schedule(tasker.sched_wk_nb, -1),
    sched_sat_nb: schedule(tasker.sched_sat_nb, -1),
    sched_sun_nb: schedule(tasker.sched_sun_nb, -1),
};
var oregon = {
    line: "bs",
    order: 6,
    id: "oregon",
    name: "Oregon",
    sched_wk_sb: schedule(snyder.sched_wk_sb, 1),
    sched_sat_sb: schedule(snyder.sched_sat_sb, 1),
    sched_sun_sb: schedule(snyder.sched_sun_sb, 1),
    sched_wk_nb: schedule(snyder.sched_wk_nb, -2),
    sched_sat_nb: schedule(snyder.sched_sat_nb, -2),
    sched_sun_nb: schedule(snyder.sched_sun_nb, -2)
};
var att = {
    line: "bs",
    order: 7,
    id: "att",
    name: "AT&T",
    sched_wk_sb: schedule(oregon.sched_wk_sb, 3),
    sched_sat_sb: schedule(oregon.sched_sat_sb, 3),
    sched_sun_sb: schedule(oregon.sched_sun_sb, 3),
    sched_wk_nb: schedule(oregon.sched_wk_sb, -3),
    sched_sat_nb: schedule(oregon.sched_sat_sb, -3),
    sched_sun_nb: schedule(oregon.sched_sun_sb, -3),
};

//Market Frankford Line
var frank = {
    line: "mf",
    order: -17,
    id: "frank",
    name: "Frankford",
    sched_wk_sb: [5.0, 5.14, 5.27, 5.39, 5.41, 5.5, 6.0, 6.09, 6.17, 6.24, 6.3, 6.35, 6.4, 6.44, 6.48, 6.52, 6.56, 7.0, 7.08, 7.16, 7.24, 7.32, 7.4, 7.48, 7.56, 8.04, 8.12, 8.20, 8.28, 8.36, 8.44, 8.52, 9, 9.04, 9.08, 9.12, 9.17, 9.23, 9.29, 9.35, 9.41, 9.47, 9.53, 9.59, 10.05, 10.11, 10.17, 10.23, 10.29, 10.35, 10.41, 10.47, 10.53, 10.59, 11.05, 11.11, 11.17, 11.23, 11.29, 11.35, 11.41, 11.47, 11.53, 11.59, 12.05, 12.11, 12.17, 12.23, 12.29, 12.35, 12.41, 12.47, 12.53, 12.59, 13.05, 13.11, 13.17, 13.23, 13.29, 13.35, 13.40, 13.45, 13.50, 13.56, 14.0, 14.04, 14.09, 14.14, 14.19, 14.24, 14.29, 14.34, 14.39, 14.44, 14.49, 14.54, 14.59, 15.04, 15.09, 15.14, 15.19, 15.24, 15.29, 15.32, 15.36, 15.40, 15.44, 15.48, 15.52, 15.56, 16.00, 16.04, 16.08, 16.12, 16.16, 16.20, 16.24, 16.28, 16.32, 16.36, 16.40, 16.44, 16.48, 16.52, 16.56, 17.00, 17.04, 17.08, 17.12, 17.16, 17.20, 17.24, 17.28, 17.32, 17.36, 17.40, 17.45, 17.50, 17.55, 18.00, 18.05, 18.11, 18.18, 18.26, 18.35, 18.45, 18.55, 19.05, 19.15, 19.25, 19.35, 19.45, 19.55, 20.05, 20.15, 20.25, 20.35, 20.45, 20.56, 21.07, 21.19, 21.31, 21.43, 21.55, 22.07, 22.19, 22.31, 22.43, 22.55, 23.08, 23.21, 23.36, 23.51, 24.01],
    sched_sat_sb: [5.01, 5.21, 5.41, 5.59, 6.16, 6.31, 6.46, 7.01, 7.16, 7.31, 7.44, 7.56, 8.08, 8.20, 8.32, 8.44, 8.55, 9.05, 9.15, 9.25, 9.35, 9.45, 9.55, 10.05, 10.15, 10.25, 10.35, 10.45, 10.55, 11.05, 11.15, 11.25, 11.35, 11.45, 11.55, 12.05, 12.15, 12.25, 12.35, 12.45, 12.55, 13.05, 13.15, 13.25, 13.35, 13.45, 13.55, 14.05, 14.15, 14.25, 14.35, 14.45, 14.55, 15.05, 15.15, 15.25, 15.35, 15.45, 15.55, 16.05, 16.15, 16.25, 16.35, 16.45, 16.55, 17.05, 17.15, 17.25, 17.35, 17.45, 17.55, 18.05, 18.15, 18.25, 18.35, 18.45, 18.55, 19.05, 19.15, 19.25, 19.35, 19.45, 19.55, 20.05, 20.17, 20.29, 20.41, 20.53, 21.05, 21.17, 21.29, 21.41, 21.53, 22.06, 22.21, 22.36, 22.51, 23.06, 23.21, 23.36, 23.51, 24.01],
    sched_sun_sb: [5.01, 5.21, 5.41, 5.59, 6.16, 6.31, 6.46, 7.01, 7.16, 7.31, 7.44, 7.56, 8.08, 8.20, 8.32, 8.44, 8.55, 9.05, 9.15, 9.25, 9.35, 9.45, 9.55, 10.05, 10.15, 10.25, 10.35, 10.45, 10.55, 11.05, 11.15, 11.25, 11.35, 11.45, 11.55, 12.05, 12.15, 12.25, 12.35, 12.45, 12.55, 13.05, 13.15, 13.25, 13.35, 13.45, 13.55, 14.05, 14.15, 14.25, 14.35, 14.45, 14.55, 15.05, 15.15, 15.25, 15.35, 15.45, 15.55, 16.05, 16.15, 16.25, 16.35, 16.45, 16.55, 17.05, 17.15, 17.25, 17.35, 17.45, 17.55, 18.05, 18.15, 18.25, 18.35, 18.45, 18.55, 19.05, 19.15, 19.25, 19.35, 19.45, 19.55, 20.05, 20.17, 20.29, 20.41, 20.53, 21.05, 21.17, 21.29, 21.41, 21.53, 22.06, 22.21, 22.36, 22.51, 23.06, 23.21, 23.36, 23.51, 24.01],
    sched_wk_nb: [5.4, 5.54, 6.06, 6.16, 6.25, 6.33, 6.39, 6.45, 6.51, 6.57, 7.03, 7.09, 7.14, 7.19, 7.23, 7.27, 7.31, 7.35, 7.42, 7.50, 7.58, 8.06, 8.14, 8.22, 8.30, 8.38, 8.46, 8.54, 9.02, 9.10, 9.18, 9.26, 9.34, 9.39, 9.44, 9.49, 9.55, 10.01, 10.07, 10.13, 10.19, 10.25, 10.31, 10.37, 10.43, 10.49, 10.55, 11.01, 11.07, 11.13, 11.19, 11.25, 11.31, 11.37, 11.43, 11.49, 11.55, 12.01, 12.07, 12.13, 12.19, 12.25, 12.34, 12.37, 12.43, 12.49, 12.55, 13.01, 13.07, 13.13, 13.19, 13.25, 13.31, 13.37, 13.43, 13.49, 13.55, 14.01, 14.06, 14.12, 14.17, 14.22, 14.27, 14.32, 14.37, 14.42, 14.47, 14.52, 14.57, 15.02, 15.07, 15.12, 15.17, 15.22, 15.27, 15.33, 15.38, 15.42, 15.46, 15.50, 15.54, 15.58, 16.02, 16.06, 16.10, 16.14, 16.18, 16.22, 16.26, 16.30, 16.34, 16.42, 16.50, 16.58, 17.06, 17.14, 17.22, 17.30, 17.38, 17.46, 17.54, 18.02, 18.10, 18.15, 18.19, 18.24, 18.29, 18.35, 18.42, 18.50, 18.59, 19.05, 19.09, 19.19, 19.29, 19.39, 19.49, 19.59, 20.09, 20.19, 20.29, 20.39, 20.49, 21.01, 21.13, 21.25, 21.37, 21.49, 22.01, 22.13, 22.25, 22.37, 22.49, 23.01, 23.13, 23.25, 23.39, 23.54, 24.09, 24.24, 24.39, 24.54],
    sched_sat_nb: [5.43, 6.03, 6.21, 6.38, 6.54, 7.09, 7.24, 7.39, 7.47, 7.54, 8.09, 8.24, 8.37, 8.49, 8.59, 9.09, 9.19, 9.29, 9.39, 9.49, 9.59, 10.09, 10.19, 10.29, 10.39, 10.49, 10.59, 11.09, 11.19, 11.29, 11.39, 11.49, 11.59, 12.09, 12.19, 12.29, 12.39, 12.49, 12.59, 13.09, 13.19, 13.29, 13.39, 13.49, 13.59, 14.09, 14.19, 14.29, 14.39, 14.49, 14.59, 15.09, 15.19, 15.29, 15.39, 15.49, 15.59, 16.09, 16.19, 16.29, 16.39, 16.49, 16.59, 17.09, 17.19, 17.29, 17.39, 17.49, 17.59, 18.09, 18.19, 18.29, 18.39, 18.49, 18.59, 19.09, 19.19, 19.29, 19.39, 19.49, 19.59, 20.11, 20.23, 20.35, 20.47, 20.59, 21.11, 21.23, 21.35, 21.47, 21.59, 22.11, 22.24, 22.39, 22.54, 23.09, 23.24, 23.39, 23.54, 24.09, 24.24, 24.39, 24.54],
    sched_sun_nb: [5.43, 6.03, 6.21, 6.38, 6.54, 7.09, 7.24, 7.39, 7.47, 7.54, 8.09, 8.24, 8.37, 8.49, 8.59, 9.09, 9.19, 9.29, 9.39, 9.49, 9.59, 10.09, 10.19, 10.29, 10.39, 10.49, 10.59, 11.09, 11.19, 11.29, 11.39, 11.49, 11.59, 12.09, 12.19, 12.29, 12.39, 12.49, 12.59, 13.09, 13.19, 13.29, 13.39, 13.49, 13.59, 14.09, 14.19, 14.29, 14.39, 14.49, 14.59, 15.09, 15.19, 15.29, 15.39, 15.49, 15.59, 16.09, 16.19, 16.29, 16.39, 16.49, 16.59, 17.09, 17.19, 17.29, 17.39, 17.49, 17.59, 18.09, 18.19, 18.29, 18.39, 18.49, 18.59, 19.09, 19.19, 19.29, 19.39, 19.49, 19.59, 20.11, 20.23, 20.35, 20.47, 20.59, 21.11, 21.23, 21.35, 21.47, 21.59, 22.11, 22.24, 22.39, 22.54, 23.09, 23.24, 23.39, 23.54, 24.09, 24.24, 24.39, 24.54],
};
var marg = {
    line: "mf",
    order: -16,
    id: "marg",
    name: "Margaret-Orthodox",
    sched_wk_sb: schedule(frank.sched_wk_sb, 2),
    sched_sat_sb: schedule(frank.sched_sat_sb, 2),
    sched_sun_sb: schedule(frank.sched_sun_sb, 2),
    sched_wk_nb: schedule(frank.sched_wk_nb, -2),
    sched_sat_nb: schedule(frank.sched_sat_nb, -2),
    sched_sun_nb: schedule(frank.sched_sun_nb, -2),
};
var church = {
    line: "mf",
    order: -15,
    id: "church",
    name: "Church",
    sched_wk_sb: schedule(marg.sched_wk_sb, 1),
    sched_sat_sb: schedule(marg.sched_sat_sb, 1),
    sched_sun_sb: schedule(marg.sched_sun_sb, 1),
    sched_wk_nb: schedule(marg.sched_wk_nb, -1),
    sched_sat_nb: schedule(marg.sched_sat_nb, -1),
    sched_sun_nb: schedule(marg.sched_sun_nb, -1),
};
var eriet = {
    line: "mf",
    order: -14,
    id: "eriet",
    name: "Erie-Torresdale",
    sched_wk_sb: schedule(church.sched_wk_sb, 2),
    sched_sat_sb: schedule(church.sched_sat_sb, 2),
    sched_sun_sb: schedule(church.sched_sun_sb, 2),
    sched_wk_nb: schedule(church.sched_wk_nb, -2),
    sched_sat_nb: schedule(church.sched_sat_nb, -2),
    sched_sun_nb: schedule(church.sched_sun_nb, -2),
};
var tioga = {
    line: "mf",
    order: -13,
    id: "tioga",
    name: "Tioga",
    sched_wk_sb: schedule(eriet.sched_wk_sb, 1),
    sched_sat_sb: schedule(eriet.sched_sat_sb, 1),
    sched_sun_sb: schedule(eriet.sched_sun_sb, 1),
    sched_wk_nb: schedule(eriet.sched_wk_nb, -1),
    sched_sat_nb: schedule(eriet.sched_sat_nb, -1),
    sched_sun_nb: schedule(eriet.sched_sun_nb, -1),
};
var alleghmf = {
    line: "mf",
    order: -12,
    id: "alleghmf",
    name: "Allegheny",
    sched_wk_sb: schedule(tioga.sched_wk_sb, 1),
    sched_sat_sb: schedule(tioga.sched_sat_sb, 1),
    sched_sun_sb: schedule(tioga.sched_sun_sb, 1),
    sched_wk_nb: schedule(tioga.sched_wk_nb, -1),
    sched_sat_nb: schedule(tioga.sched_sat_nb, -1),
    sched_sun_nb: schedule(tioga.sched_sun_nb, -1),
};
var somer = {
    line: "mf",
    order: -11,
    id: "somer",
    name: "Somerset",
    sched_wk_sb: schedule(alleghmf.sched_wk_sb, 2),
    sched_sat_sb: schedule(alleghmf.sched_sat_sb, 2),
    sched_sun_sb: schedule(alleghmf.sched_sun_sb, 2),
    sched_wk_nb: schedule(alleghmf.sched_wk_nb, -2),
    sched_sat_nb: schedule(alleghmf.sched_sat_nb, -2),
    sched_sun_nb: schedule(alleghmf.sched_sun_nb, -2),
};
var hunt = {
    line: "mf",
    order: -10,
    id: "hunt",
    name: "Huntingdon",
    sched_wk_sb: schedule(somer.sched_wk_sb, 1),
    sched_sat_sb: schedule(somer.sched_sat_sb, 1),
    sched_sun_sb: schedule(somer.sched_sun_sb, 1),
    sched_wk_nb: schedule(somer.sched_wk_nb, -1),
    sched_sat_nb: schedule(somer.sched_sat_nb, -1),
    sched_sun_nb: schedule(somer.sched_sun_nb, -1),
};
var york = {
    line: "mf",
    order: -9,
    id: "york",
    name: "York-Dauphin",
    sched_wk_sb: schedule(hunt.sched_wk_sb, 1),
    sched_sat_sb: schedule(hunt.sched_sat_sb, 1),
    sched_sun_sb: schedule(hunt.sched_sun_sb, 1),
    sched_wk_nb: schedule(hunt.sched_wk_nb, -1),
    sched_sat_nb: schedule(hunt.sched_sat_nb, -1),
    sched_sun_nb: schedule(hunt.sched_sun_nb, -1),
};
var berks = {
    line: "mf",
    order: -8,
    id: "berks",
    name: "Berks",
    sched_wk_sb: schedule(york.sched_wk_sb, 2),
    sched_sat_sb: schedule(york.sched_sat_sb, 2),
    sched_sun_sb: schedule(york.sched_sun_sb, 2),
    sched_wk_nb: schedule(york.sched_wk_nb, -2),
    sched_sat_nb: schedule(york.sched_sat_nb, -2),
    sched_sun_nb: schedule(york.sched_sun_nb, -2),
};
var girardmf = {
    line: "mf",
    order: -7,
    id: "girardmf",
    name: "Girard",
    sched_wk_sb: schedule(berks.sched_wk_sb, 2),
    sched_sat_sb: schedule(berks.sched_sat_sb, 2),
    sched_sun_sb: schedule(berks.sched_sun_sb, 2),
    sched_wk_nb: schedule(berks.sched_wk_nb, -2),
    sched_sat_nb: schedule(berks.sched_sat_nb, -2),
    sched_sun_nb: schedule(berks.sched_sun_nb, -2),
};
var springmf = {
    line: "mf",
    order: -6,
    id: "springmf",
    name: "Spring Garden",
    sched_wk_sb: schedule(girardmf.sched_wk_sb, 2),
    sched_sat_sb: schedule(girardmf.sched_sat_sb, 2),
    sched_sun_sb: schedule(girardmf.sched_sun_sb, 2),
    sched_wk_nb: schedule(girardmf.sched_wk_nb, -2),
    sched_sat_nb: schedule(girardmf.sched_sat_nb, -2),
    sched_sun_nb: schedule(girardmf.sched_sun_nb, -2),
};
var second = {
    line: "mf",
    order: -5,
    id: "second",
    name: "2nd St",
    sched_wk_sb: schedule(springmf.sched_wk_sb, 2),
    sched_sat_sb: schedule(springmf.sched_sat_sb, 2),
    sched_sun_sb: schedule(springmf.sched_sun_sb, 2),
    sched_wk_nb: schedule(springmf.sched_wk_nb, -2),
    sched_sat_nb: schedule(springmf.sched_sat_nb, -2),
    sched_sun_nb: schedule(springmf.sched_sun_nb, -2),
};
var fifth = {
    line: "mf",
    order: -4,
    id: "fifth",
    name: "5th St",
    sched_wk_sb: schedule(second.sched_wk_sb, 1),
    sched_sat_sb: schedule(second.sched_sat_sb, 1),
    sched_sun_sb: schedule(second.sched_sun_sb, 1),
    sched_wk_nb: schedule(second.sched_wk_nb, -1),
    sched_sat_nb: schedule(second.sched_sat_nb, -1),
    sched_sun_nb: schedule(second.sched_sun_nb, -1),
};
var eight = {
    line: "mf",
    order: -3,
    id: "eight",
    name: "8th St",
    sched_wk_sb: schedule(fifth.sched_wk_sb, 1),
    sched_sat_sb: schedule(fifth.sched_sat_sb, 1),
    sched_sun_sb: schedule(fifth.sched_sun_sb, 1),
    sched_wk_nb: schedule(fifth.sched_wk_nb, -1),
    sched_sat_nb: schedule(fifth.sched_sat_nb, -1),
    sched_sun_nb: schedule(fifth.sched_sun_nb, -1),
};
var elev = {
    line: "mf",
    order: -2,
    id: "elev",
    name: "11th St",
    sched_wk_sb: schedule(eight.sched_wk_sb, 1),
    sched_sat_sb: schedule(eight.sched_sat_sb, 1),
    sched_sun_sb: schedule(eight.sched_sun_sb, 1),
    sched_wk_nb: schedule(eight.sched_wk_nb, -1),
    sched_sat_nb: schedule(eight.sched_sat_nb, -1),
    sched_sun_nb: schedule(eight.sched_sun_nb, -1),
};
var thirteen = {
    line: "mf",
    order: -1,
    id: "thirteen",
    name: "13th St",
    sched_wk_sb: schedule(elev.sched_wk_sb, 1),
    sched_sat_sb: schedule(elev.sched_sat_sb, 1),
    sched_sun_sb: schedule(elev.sched_sun_sb, 1),
    sched_wk_nb: schedule(elev.sched_wk_nb, -1),
    sched_sat_nb: schedule(elev.sched_sat_nb, -1),
    sched_sun_nb: schedule(elev.sched_sun_nb, -1),
};
var fif = {
    line: "mf",
    order: 0,
    id: "fif",
    name: "15th St",
    sched_wk_sb: schedule(thirteen.sched_wk_sb, 1),
    sched_sat_sb: schedule(thirteen.sched_sat_sb, 1),
    sched_sun_sb: schedule(thirteen.sched_sun_sb, 1),
    sched_wk_nb: schedule(thirteen.sched_wk_nb, -1),
    sched_sat_nb: schedule(thirteen.sched_sat_nb, -1),
    sched_sun_nb: schedule(thirteen.sched_sun_nb, -1),
};
var thirty = {
    line: "mf",
    order: 1,
    id: "thirty",
    name: "30th St",
    sched_wk_sb: schedule(fif.sched_wk_sb, 2),
    sched_sat_sb: schedule(fif.sched_sat_sb, 2),
    sched_sun_sb: schedule(fif.sched_sun_sb, 2),
    sched_wk_nb: schedule(fif.sched_wk_nb, -2),
    sched_sat_nb: schedule(fif.sched_sat_nb, -2),
    sched_sun_nb: schedule(fif.sched_sun_nb, -2),
};
var thirtyfour = {
    line: "mf",
    order: 2,
    id: "thirtyfour",
    name: "34th St",
    sched_wk_sb: schedule(thirty.sched_wk_sb, 1),
    sched_sat_sb: schedule(thirty.sched_sat_sb, 1),
    sched_sun_sb: schedule(thirty.sched_sun_sb, 1),
    sched_wk_nb: schedule(thirty.sched_wk_nb, -1),
    sched_sat_nb: schedule(thirty.sched_sat_nb, -1),
    sched_sun_nb: schedule(thirty.sched_sun_nb, -1),
};
var fourty = {
    line: "mf",
    order: 3,
    id: "forty",
    name: "40th St",
    sched_wk_sb: schedule(thirtyfour.sched_wk_sb, 2),
    sched_sat_sb: schedule(thirtyfour.sched_sat_sb, 2),
    sched_sun_sb: schedule(thirtyfour.sched_sun_sb, 2),
    sched_wk_nb: schedule(thirtyfour.sched_wk_nb, -2),
    sched_sat_nb: schedule(thirtyfour.sched_sat_nb, -2),
    sched_sun_nb: schedule(thirtyfour.sched_sun_nb, -2),
};
var fourtysix = {
    line: "mf",
    order: 4,
    id: "fourtysix",
    name: "46th St",
    sched_wk_sb: schedule(fourty.sched_wk_sb, 2),
    sched_sat_sb: schedule(fourty.sched_sat_sb, 2),
    sched_sun_sb: schedule(fourty.sched_sun_sb, 2),
    sched_wk_nb: schedule(fourty.sched_wk_nb, -2),
    sched_sat_nb: schedule(fourty.sched_sat_nb, -2),
    sched_sun_nb: schedule(fourty.sched_sun_nb, -2),
};
var fiftytwo = {
    line: "mf",
    order: 5,
    id: "fiftytwo",
    name: "52nd St",
    sched_wk_sb: schedule(fourtysix.sched_wk_sb, 1),
    sched_sat_sb: schedule(fourtysix.sched_sat_sb, 1),
    sched_sun_sb: schedule(fourtysix.sched_sun_sb, 1),
    sched_wk_nb: schedule(fourtysix.sched_wk_nb, -1),
    sched_sat_nb: schedule(fourtysix.sched_sat_nb, -1),
    sched_sun_nb: schedule(fourtysix.sched_sun_nb, -1),
};
var fiftysix = {
    line: "mf",
    order: 6,
    id: "fiftytwo",
    name: "52nd St",
    sched_wk_sb: schedule(fiftytwo.sched_wk_sb, 1),
    sched_sat_sb: schedule(fiftytwo.sched_sat_sb, 1),
    sched_sun_sb: schedule(fiftytwo.sched_sun_sb, 1),
    sched_wk_nb: schedule(fiftytwo.sched_wk_nb, -1),
    sched_sat_nb: schedule(fiftytwo.sched_sat_nb, -1),
    sched_sun_nb: schedule(fiftytwo.sched_sun_nb, -1),
};
var sixty = {
    line: "mf",
    order: 7,
    id: "sixty",
    name: "60th St",
    sched_wk_sb: schedule(fiftysix.sched_wk_sb, 2),
    sched_sat_sb: schedule(fiftysix.sched_sat_sb, 2),
    sched_sun_sb: schedule(fiftysix.sched_sun_sb, 2),
    sched_wk_nb: schedule(fiftysix.sched_wk_nb, -2),
    sched_sat_nb: schedule(fiftysix.sched_sat_nb, -2),
    sched_sun_nb: schedule(fiftysix.sched_sun_nb, -2),
};
var sixtythree = {
    line: "mf",
    order: 8,
    id: "sixtythree",
    name: "63rd St",
    sched_wk_sb: schedule(sixty.sched_wk_sb, 1),
    sched_sat_sb: schedule(sixty.sched_sat_sb, 1),
    sched_sun_sb: schedule(sixty.sched_sun_sb, 1),
    sched_wk_nb: schedule(sixty.sched_wk_nb, -1),
    sched_sat_nb: schedule(sixty.sched_sat_nb, -1),
    sched_sun_nb: schedule(sixty.sched_sun_nb, -1),
};
var milb = {
    line: "mf",
    order: 9,
    id: "milb",
    name: "Milbourne",
    sched_wk_sb: schedule(sixtythree.sched_wk_sb, 2),
    sched_sat_sb: schedule(sixtythree.sched_sat_sb, 2),
    sched_sun_sb: schedule(sixtythree.sched_sun_sb, 2),
    sched_wk_nb: schedule(sixtythree.sched_wk_nb, -2),
    sched_sat_nb: schedule(sixtythree.sched_sat_nb, -2),
    sched_sun_nb: schedule(sixtythree.sched_sun_nb, -2),
};
var sixtynine = {
    line: "mf",
    order: 10,
    id: "sixtynine",
    name: "69th St",
    sched_wk_sb: schedule(milb.sched_wk_sb, 4),
    sched_sat_sb: schedule(milb.sched_sat_sb, 4),
    sched_sun_sb: schedule(milb.sched_sun_sb, 4),
    sched_wk_nb: schedule(milb.sched_wk_nb, -1),
    sched_sat_nb: schedule(milb.sched_sat_nb, -1),
    sched_sun_nb: schedule(milb.sched_sun_nb, -1),
};

//-----------------------------------------------------------

var stations = [fern, olney, logan, wyoming, hunt_park, erie, allegh, nphilly, susque, cecil, girard, fairmount, spring, race, city_hall, walnut, lombard, ellsworth, tasker, snyder, oregon, att, frank, marg, church, eriet, tioga, alleghmf, somer, hunt, york, berks, girardmf, springmf, second, fifth, eight, elev, thirteen, fif, thirty, thirtyfour, fourty, fourtysix, fiftytwo, fiftysix, sixty, sixtythree, milb, sixtynine]; //Setting array of stations

//-----------------------------------------------------------

function schedule(prev_station, diff) { //sets schedules for all stations

    var schedule = new Array();

    if (diff > 0) { //for southbound and westbound schedules, positive difference
        for (i = 0; i < prev_station.length; i++) {

            schedule[i] = prev_station[i] + (diff / 100);

            if ((schedule[i] - Math.floor(schedule[i])) > .59) {
                var minutes = schedule[i] - Math.floor(schedule[i]) - .60;
                schedule[i] = Math.floor(schedule[i]) + 1 + minutes;
            }
            schedule[i] = round(schedule[i]);
        };
    } else { //for northbound and eastbound schedules, negative difference
        for (i = 0; i < prev_station.length; i++) {

            schedule[i] = prev_station[i] + (diff / 100);

            if ((schedule[i] - Math.floor(schedule[i])) > .59) {
                var minutes = Math.ceil(schedule[i]) - schedule[i];
                schedule[i] = Math.floor(schedule[i]) + (.6 - minutes);
            }
            schedule[i] = round(schedule[i]);
        };
    }
    return schedule;
};

//-----------------------------------------------------------

window.day = parseDay();//setting global variable for day. Needs to be global for day toolbar

var vpHeight = $(window).height(); //getting height of viewport

console.log("Height: "+vpHeight);

//-----------------------------------------------------------

$('.submit').click(function(){
    submit();
    $(this).addClass("hide");
    $(".table_and_tools").removeClass("hide");



   

});

document.cookie="username=John Doe; domain=NULL";


function submit() {

    //window.performance.mark('mark_start_process');

    console.log("Submit executed");
    
    var start_sel = document.getElementById("start_dest");
    var start = start_sel.options[start_sel.selectedIndex].value;
    var end_sel = document.getElementById("end_dest");
    var end = end_sel.options[end_sel.selectedIndex].value;

    var now = new Date();
    var hours = now.getHours();
    var minutes = now.getMinutes(); 
    
    var time = hours+"."+minutes;//setting time 

    routeInit(start, end, time, day);

    if((start&&end)!=undefined){
        $('#start_dest, #end_dest').change(function() { //After initial submission, script checks for changes and dynamically updates

            var start_sel = document.getElementById("start_dest");
            var start = start_sel.options[start_sel.selectedIndex].value;
            var end_sel = document.getElementById("end_dest");
            var end = end_sel.options[end_sel.selectedIndex].value;

            routeInit(start, end, time, day); //Prevents console errors from undefined select variables
        });
    };
    
    $('#wk').click(function(){//dynamically modifies the results based on the day buttons

        var start_sel = document.getElementById("start_dest");
        var start = start_sel.options[start_sel.selectedIndex].value;
        var end_sel = document.getElementById("end_dest");
        var end = end_sel.options[end_sel.selectedIndex].value;
        
        window.day = "wk";

        if ((start_sel != undefined) && (end_sel != undefined)) {
            routeInit(start, end, time, "wk"); //Prevents console errors from undefined select variables
        }
    });
    $('#sat').click(function(){//dynamically modifies the results based on the day buttons

        var start_sel = document.getElementById("start_dest");
        var start = start_sel.options[start_sel.selectedIndex].value;
        var end_sel = document.getElementById("end_dest");
        var end = end_sel.options[end_sel.selectedIndex].value;
           

        window.day = "sat";

        if ((start_sel != undefined) && (end_sel != undefined)) {
            routeInit(start, end, time, day); //Prevents console errors from undefined select variables
        }

    });
    $('#sun').click(function(){//dynamically modifies the results based on the day buttons
    
        var start_sel = document.getElementById("start_dest");
        var start = start_sel.options[start_sel.selectedIndex].value;
        var end_sel = document.getElementById("end_dest");
        var end = end_sel.options[end_sel.selectedIndex].value;
        
        window.day = "sun";

        if ((start_sel != undefined) && (end_sel != undefined)) {
            routeInit(start, end, time, "sun");  //Prevents console errors from undefined select variables
        }
    });  
    $('#rst').click(function(){//Resets the form and removes any previous results
        
        $(".submit").removeClass("hide");
        $(".table_and_tools").addClass("hide")

        $('#start_dest').prop('selectedIndex',0);//resets station drop down box
        $('#end_dest').prop('selectedIndex',0);//resets station drop down box

        $('.times_row').remove(); //Prevents empty/ghosted <tr> from being left in the markup from previous executions
        $('.start_station').empty();
        $('.end_station').empty();
        $('.times_row').empty(); //empty the times for unique and consecutive executions
        $('.message_row').remove();//empties the special flag message, otherwise they accumulate at top of table
        $('.platter').addClass("vert_center");//vertically centers picker/platter again

        window.day = parseDay();//resets day to currenty day

        return;
    });  
};

// $('#end_dest').change(function(){//This snippet can be used if submit button isn't used. UX decision, keep submit button or ditch it?
// 	submit();
// });

//-----------------------------------------------------------

function routeInit(start, end, time, day) { //Using form to get times

    console.log("Routeinit executed");

    for (i = 0; i < stations.length; i++) {
        if (stations[i].id == start) {
            var start_station = stations[i];
        } else if (stations[i].id == end) {
            var end_station = stations[i];
        };
    };

    route(start_station, end_station, day, time);
};

//-----------------------------------------------------------

function route(start_station, end_station, day, time) {//Logic that generates requested times depending on direction and day

    console.log("Route executed");

    var leave_time = new Array();
    var arrive_time = new Array();
    var i=0;
    var sb;
    var pointer;
    var flag;

    if(start_station.order<end_station.order){
        sb = true;
    }
    else{
        sb = false;
    }


    function subroute(start,end,close){//Magic all happens here...great comment right?
        while (i< start.length) {
            leave_time[i] = start[i];//setting leave times from the start station object
            arrive_time[i] = end[i];//setting arrive times from the end station object

            if((close != undefined)&&(start[i] > close))//logic to see if station closed
            {
                flag = "c";//setting a flag to the rendering function that it closed
                leave_time.pop();//removes the last item in leave_time array because it is one entry past close time
                arrive_time.pop();//removes the last item in leave_time array because it is one entry past close time
                break;//need to stop the while loop
            };
            if(sb){
                if((day=="wk")&&(start_station.sched_wk_sb[i]<time)){//compares schedule to current time, indicates which one is closest
                    pointer = i+1;//assigning pointer, incremented to get the next one
                    console.log("pointer funciton");
                }
                else if ((day=="sat")&&(start_station.sched_sat_sb[i]<time)){
                    pointer = i+1;//assigning pointer, incremented to get the next one
                }
                else if(start_station.sched_sun_sb[i]<time){
                    pointer = i+1;//assigning pointer, incremented to get the next one
                }
            }
            else{
                if((day=="wk")&&(start_station.sched_wk_nb[i]<time)){//compares schedule to current time, indicates which one is closest
                    pointer = i+1;//assigning pointer, incremented to get the next one
                    console.log("pointer funciton");
                }
                else if ((day=="sat")&&(start_station.sched_sat_nb[i]<time)){
                    pointer = i+1;//assigning pointer, incremented to get the next one
                }
                else if(start_station.sched_sun_nb[i]<time){
                    pointer = i+1;//assigning pointer, incremented to get the next one
                }
            }
            i++;

            flag = "d"//setting a flag to the rendering function that no more trains are coming
        };
    };

    if (sb) { //southbound
        if (day === "wk") { //weekday southbound scheduling
            subroute( start_station.sched_wk_sb , end_station.sched_wk_sb , start_station.close_wk );
        } 
        else if (day === "sat") { //saturday southbound scheduling
            subroute( start_station.sched_sat_sb , end_station.sched_sat_sb , start_station.close_end );
        }
        else { //sunday southbound scheduling
            subroute( start_station.sched_sun_sb , end_station.sched_sun_sb , start_station.close_end );
        };
    }
    else { //northbound
        if (day === "wk") { //weekday northbound scheduling
            subroute( start_station.sched_wk_nb , end_station.sched_wk_nb , start_station.close_wk );
        } 
        else if (day === "sat") { //saturday northbound scheduling
             subroute( start_station.sched_sat_nb , end_station.sched_sat_nb , start_station.close_end );
        }
        else { //sunday northbound scheduling
             subroute( start_station.sched_sun_nb , end_station.sched_sun_nb , start_station.close_end );
        };
    };

    console.log("Pointer: "+pointer);//This pointer tells me which table row is next/should be highlighted

    render(start_station, end_station, leave_time, arrive_time, flag, pointer, window.day);

};

//-----------------------------------------------------------

function render(start_station, end_station, leave_time, arrive_time, flag, pointer, day) {

    console.log("Render executed");

    $('.platter').removeClass("vert_center");//vertically uncenters the picker/form div

    function render_clear(){
        $('.times_row').remove(); //Prevents empty/ghosted <tr> from being left in the markup from previous executions
        $('.start_station').empty().append(start_station.name); // station name in first row
        $('.end_station').empty().append(end_station.name); // station name in first row
        $('.times_row').empty(); //empty the times for unique and consecutive executions
        $('.message_row').remove();//empties the special flag message, otherwise they accumulate at top of table
        console.log("clearing")
    };

    render_clear();

    for (var i = 0; i < leave_time.length; i++) {//function that populates times into table
        $(".times").find('tbody').append($('<tr class="times_row">').append($('<td class="start' + i + '">')));
        $(".times tr:last").append($('<td class="end' + i + '">'));
        $('.start' + i).empty().append(timeformat(leave_time[i]));
        $('.end' + i).empty().append(timeformat(arrive_time[i]));
    }

    $(".times").find('tbody').append($('<tr class="message_row">').append($('<td class="start' + i + '">'))); // Setting last row for flagged message

    if(flag == "c"){//the "c" flag or closure indicator
        if(day == "wk"){//checks if weekday or weekend
            $('.start' + i).empty().append("<span class='warn'>"+start_station.name+" CLOSED @ "+timeformat(start_station.close_wk)+"</span");
        }
        else{
            $('.start' + i).empty().append("<span class='warn'>"+start_station.name+" CLOSED @ "+timeformat(start_station.close_end)+"</span");
        }
    }
    else{//the "d" flag or the done indicator
        $('.start' + i).empty().append("No more trains running");
    }

    if (day == "wk"){
        $("#wk").addClass("active");
        $("#sat").removeClass("active");
        $("#sun").removeClass("active");
    }
    else if(day == "sat"){
        $("#wk").removeClass("active");
        $("#sat").addClass("active");
        $("#sun").removeClass("active");
    }
    else{
        $("#wk").removeClass("active");
        $("#sat").removeClass("active");
        $("#sun").addClass("active");
    };

    $('.table-wrap').height(vpHeight-150);//Sets the height of the schedule table. It is meant to fill entire screen with the toolbar, hence subtracting 150 pixels

    $('.table').fadeIn("slow");//fading the table in to soften the UX

    $('.start'+pointer).addClass('pointer');//adds class to highlight closest upcoming time, can't address both start and end simultaneously in jquery
    $('.end'+pointer).addClass('pointer');//""
 
    // $('.table-wrap').animate(
    // {   top: $('.start'+pointer).offset().top,
    //     left: 0}, 
    // 500); 
    //This snippet is for the autoscrolling behavior to highlight the most relevant time currently buggy

};

//-----------------------------------------------------------

function timeformat(time,start_station,day) { //formats time from a double into hh:mm for rendering purposes only

    if ((time >= 12) && (time < 24)) {
        var meridian = "PM";

        if (time > 12.59) {
            time = round((time) - 12.00) //Formatting time from 24hr to 12hr style
        };
    } else {
        var meridian = "AM"
    };

    time = time.toString().split("."); //Converting time variable to a string and splitting to get minutes and hours

    if (time[1] === undefined) { //If minutes are undefined,
        time[1] = "00"; //Converts undefined minutes to hh:00;
    };

    if (time[0] == 24) { //If the hour is 24, set it to 12
        time[0] = 12
    };

    if (time[1].length == 1) {
        time[1] = time[1] * 10; //Adds trailing zero to hh:m0 numbers that otherwise display as hh:m;
    };

    return (time[0] + ":" + time[1] + " " + meridian); //returning a string of the time
};

//-----------------------------------------------------------

function parseDay() {//returns "wk","sat","sun" depending on day of week

    console.log("Parseday executed");

    var day = Date().split(" "); //Gets raw day of the week

    console.log(day[0]);

    if (day[0] == "Sat") {
        //return "sat";
        return "sat";
    } else if (day[0] == "Sun") {
        //return "sun";
        return "sun";
    } else {
        return "wk";
    }
};

//-----------------------------------------------------------

function round(num) { //rounding function necessary because javascript has issues adding doubles to each other.
    return ((Math.round(num * 100)) / 100);
};

//-----------------------------------------------------------

$('.line1').ready(function() { //Function that populates starting station list and other display functions

    var lineval1 = $('.line1');

    $(".line1").change(function() {
        $('.submit').removeClass("hide");
        $('.table_and_tools').addClass('hide');
        $('.platter').addClass('vert_center');

        if (lineval1.is(":checked")) {

            var linevalue1 = "mf";
            setTimeout(color_delay, 250); //This delay makes the CSS changes smoother in conjunction with the fade in/out of the times table
            function color_delay() {
                $('.label1').removeClass("bs");//changes color of switch button labels
                $('.label2').addClass("mf");//changes color of switch button labels
            }

            $('.station').addClass("mf").removeClass("bs");//Changes color of table header

        } else {
            var linevalue1 = "bs";
            setTimeout(color_delay2, 250); //This delay makes the CSS changes smoother in conjunction with the fade in/out of the times table
            function color_delay2() {
                $('.label1').addClass("bs");//changes color of switch button labels
                $('.label2').removeClass("mf");//changes color of switch button labels
            }

            $('.station').addClass("bs").removeClass("mf");//Changes color of table header
        };

        $('#start_dest').empty();
        $('#end_dest').empty();

        $('#start_dest').append('<option value="" disabled="disabled" selected="selected">Starting from...</option>');
        $('#end_dest').append('<option value="" disabled="disabled" selected="selected">Ending at...</option>');

        for (i = 0; i < stations.length; i++) {
            if (linevalue1 == stations[i].line) {
                $('#start_dest').append("<option value='" + stations[i].id + "'>" + stations[i].name + "</option>");
            }
        }
    });
});

//-----------------------------------------------------------

$('#start_dest').change(function() { //Function sees start destination and removes it as an option for end destination

    var selection = document.getElementById("start_dest").options[document.getElementById("start_dest").selectedIndex].value;

    var selection_end = document.getElementById("end_dest").options[document.getElementById("end_dest").selectedIndex].value;

    if ((selection_end == "") || (selection == selection_end)) { //Resets drop down list if end isn't defined or if start and end are the s
        $('#end_dest').empty();

        $('#end_dest').append("<option value='' disabled='disabled' selected='selected'>Ending at...</option>");


        if ($('.line1').is(":checked")) {
            var linevalue1 = "mf";

        } else {
            var linevalue1 = "bs";
        };

        for (i = 0; i < stations.length; i++) {
            if (selection != stations[i].id && linevalue1 == stations[i].line) {
                $('#end_dest').append("<option value='" + stations[i].id + "'>" + stations[i].name + "</option>");
            };
        };
    };
});

//-----------------------------------------------------------


function favorite(num) { //rounding function necessary because javascript has issues adding doubles to each other.
    
};